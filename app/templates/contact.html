{% extends 'components/layout.html' %}
{% load static %}

{% block content %}



<!DOCTYPE html>
<html lang="en">
<head>
   






    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
</head>
<body>
    <div class="container">
        
        
        <div class="form-container">
            <div class="form-header">
                <h1>Schedule your call Or get Updates</h1>
                <h2>Your path to building a thriving business begins here.</h2>
                <p>You need a solid business foundation to be successful. Let's talk about how to get there. 
                   With IMPACT, you'll learn how to build trust with your customers and, as a result, win more customers.</p>
            </div>
            
            <div class="video-container">
                <div class="video-wrapper">
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/SsIVTZn4nyc?si=p0qu-CE8MUh5FDxZ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe> 
                </div>
                <div class="video-info">
                    <h3>Here's what to expect when you schedule your call:</h3>
                    <ul>
                        <li>A 30-minute discovery call with a growth strategist to discuss where you are and where you want to go</li>
                        <li>Personalized recommendations to improve your digital marketing and sales strategy</li>
                        <li>A clear path to success for reaching your business goals</li>
                    </ul>
                </div>
            </div>
            
            <form id="consultation-form" action="{% url 'contact' %}" method="post">
                {% csrf_token %}
                <div class="form-grid">
                    <div class="form-group">
                        <label for="firstName">First name*</label>
                        <input type="text" id="firstName" name="firstName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last name*</label>
                        <input type="text" id="lastName" name="lastName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="companyEmail">Email address*</label>
                        <input type="email" id="companyEmail" name="companyEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="phoneNumber">Phone number*</label>
                        <input type="tel" id="phoneNumber" name="phoneNumber" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="companyName">Company name (optional)</label>
                        <input type="text" id="companyName" name="companyName" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="companyWebsite">Company website URL (optional)</label>
                        <input type="url" id="companyWebsite" name="companyWebsite" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="industry">Industry*</label>
                        <select id="industry" name="industry" class="form-control" required>
                            <option value="" selected disabled>Please Select</option>
                            <option value="technology">Technology</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="finance">Finance</option>
                            <option value="education">Education</option>
                            <option value="retail">Retail</option>
                            <option value="manufacturing">Manufacturing</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="companySize">Company size*</label>
                        <select id="companySize" name="companySize" class="form-control" required>
                            <option value="" selected disabled>Please Select</option>
                            <option value="1-10">1-10 employees</option>
                            <option value="11-50">11-50 employees</option>
                            <option value="51-200">51-200 employees</option>
                            <option value="201-500">201-500 employees</option>
                            <option value="501+">501+ employees</option>
                        </select>
                    </div>
                </div>
            
                <div class="form-group">
                    <label for="goals">What are your biggest sales and marketing challenges?*</label>
                    <textarea id="goals" name="goals" class="form-control" required></textarea>
                </div>
            
                <div class="checkbox-group">
                    <p><strong>How did you hear about us? (Select all that apply)*</strong></p>
                    <div class="checkbox-item">
                        <input type="checkbox" id="source1" name="sources[]" value="website">
                        <label for="source1">Need a <strong>Website</strong> for your <b>self/company</b></label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="source2" name="sources[]" value="app">
                        <label for="source2">Need a <strong>App</strong> for your <b>self/company</b></label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="source3" name="sources[]" value="learning">
                        <label for="source3">For <strong>Learning Web and App</strong> Or <b>AI</b></label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="source4" name="agreeTerms" required>
                        <label for="source4">Agree <b> <a href="{% url 'privacy_policy' %}">'Terms & and Condition'</a> </b></label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="source5" name="getUpdates">
                        <label for="source5">Get updates</label>
                    </div>
                </div>
            
                <div class="form-actions">
                    <button type="submit" name="action" value="submit" class="btn btn-outline">Submit</button>
                    <button type="submit" name="action" value="book_call" class="btn">Book a Call</button>
                </div>
            </form>
            
        </div>
        
        <div class="testimonial">
            <p class="testimonial-quote">"The value of the coaching that we got from IMPACT was next level. We've seen the cost of our marketing and cost per lead improve. It dramatically changed our selling cycle, and it's greatly increased trust with our customers."</p>
            <div class="testimonial-author">
                <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-ezTW3cpD9TjRlwaoCYUxI3hFsser3u.png" alt="Testimonial author" width="40" height="40">
                <div class="testimonial-author-info">
                    <strong>Ryan Malone</strong>
                    <span>CEO of SmartBug Media</span>
                </div>
            </div>
        </div>
        
        <div class="faq-section">
            <h2>Frequently Asked Questions</h2>
            
            <div class="faq-item">
                <div class="faq-question">What's included in the first call?</div>
                <div class="faq-answer">
                    During your first 30-minute call, we'll discuss your current business challenges, goals, and marketing strategy. Our expert will provide initial insights and determine if our services are a good fit for your needs.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">How long does the call last?</div>
                <div class="faq-answer">
                    The initial consultation call lasts approximately 30 minutes. If we determine there's a good fit, we can schedule a more in-depth follow-up session.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">Is there a cost for the first call?</div>
                <div class="faq-answer">
                    No, the initial consultation call is completely free. We believe in providing value upfront so you can make an informed decision about working with us.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">What happens after the call?</div>
                <div class="faq-answer">
                    After the call, we'll send you a summary of our discussion and recommendations. If there's mutual interest in working together, we'll propose next steps and potential service options tailored to your needs.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">Will I receive coaching during the first call?</div>
                <div class="faq-answer">
                    While the primary purpose of the first call is to understand your business and challenges, our experts will provide initial insights and quick wins you can implement right away.
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Toggle FAQ answers
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const answer = question.nextElementSibling;
                const isOpen = answer.style.display === 'block';
                
                answer.style.display = isOpen ? 'none' : 'block';
                question.style.fontWeight = isOpen ? '500' : '600';
                question.style.color = isOpen ? '' : 'var(--primary-color)';
                question.innerHTML = isOpen ? 
                    question.innerHTML.replace('−', '+') : 
                    question.innerHTML.replace('+', '−');
            });
        });
        
        // Add this function before your form submission code:
        function showCustomDialog(existingData) {
            return new Promise((resolve) => {
                const dialog = document.createElement('div');
                dialog.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: white;
                    padding: 20px;
                    border-radius: 8px;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                    z-index: 1000;
                    max-width: 400px;
                    width: 90%;
                `;
                
                dialog.innerHTML = `
                    <h3 style="margin-bottom: 15px; color: var(--primary-color);">Existing Registration Found</h3>
                    <p style="margin-bottom: 15px;">We found an existing registration with:</p>
                    <div style="margin-bottom: 20px;">
                        <p><strong>Name:</strong> ${existingData.firstName} ${existingData.lastName}</p>
                        <p><strong>Email:</strong> ${existingData.companyEmail}</p>
                        <p><strong>Phone:</strong> ${existingData.phoneNumber}</p>
                    </div>
                    <div style="display: flex; justify-content: space-between; gap: 10px;">
                        <button class="btn btn-outline" id="submitNew">Submit New</button>
                        <button class="btn" id="updateExisting">Update Existing</button>
                    </div>
                `;
                
                const overlay = document.createElement('div');
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.5);
                    z-index: 999;
                `;
                
                document.body.appendChild(overlay);
                document.body.appendChild(dialog);
                
                document.getElementById('submitNew').onclick = () => {
                    overlay.remove();
                    dialog.remove();
                    resolve(false);
                };
                
                document.getElementById('updateExisting').onclick = () => {
                    overlay.remove();
                    dialog.remove();
                    resolve(true);
                };
            });
        }

        // Form submission
        document.getElementById('consultation-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                companyEmail: document.getElementById('companyEmail').value,
                phoneNumber: document.getElementById('phoneNumber').value,
                companyName: document.getElementById('companyName').value,
                companyWebsite: document.getElementById('companyWebsite').value,
                industry: document.getElementById('industry').value,
                companySize: document.getElementById('companySize').value,
                goals: document.getElementById('goals').value,
                source1: document.getElementById('source1').checked,
                source2: document.getElementById('source2').checked,
                source3: document.getElementById('source3').checked,
                source4: document.getElementById('source4').checked,
                source5: document.getElementById('source5').checked
            };

            try {
                const response = await fetch('/contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();
                
                if (data.status === 'exists') {
                    // Show custom dialog with options
                    const userChoice = await showCustomDialog(data.existingData);
                    
                    if (userChoice) {
                        // User chose to update
                        const updateResponse = await fetch('/contact', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-CSRFToken': getCookie('csrftoken')
                            },
                            body: JSON.stringify({ ...formData, confirmUpdate: true })
                        });
                        
                        const updateData = await updateResponse.json();
                        if (updateData.status === 'success') {
                            alert('Your information has been updated successfully!');
                            document.getElementById('consultation-form').reset();
                        }
                    } else {
                        // User chose to submit new
                        const newResponse = await fetch('/contact', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-CSRFToken': getCookie('csrftoken')
                            },
                            body: JSON.stringify({ ...formData, submitNew: true })
                        });
                        
                        const newData = await newResponse.json();
                        if (newData.status === 'success') {
                            alert('Your new consultation request has been submitted successfully!');
                            document.getElementById('consultation-form').reset();
                        }
                    }
                } else if (data.status === 'success') {
                    alert('Thank you for scheduling a call! We will contact you shortly to confirm your appointment.');
                    document.getElementById('consultation-form').reset();
                } else {
                    alert('There was an error submitting the form. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('There was an error submitting the form. Please try again.');
            }
        });

        // Add CSRF token helper function
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Toggle FAQ answers
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', () => {
                    const answer = question.nextElementSibling;
                    answer.classList.toggle('open');
                });
            });
        });
    </script>
</body>
</html>

{% endblock content %}